<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>RatzTweaks</title>
<link rel="icon" type="image/png" href="favicon.png">
<script src="https://cdn.tailwindcss.com"></script>
<style>
/* Match the in-script Web UI background with a reliable local+remote fallback */
body{
  background-image: url('background.png'), url('https://raw.githubusercontent.com/NotRatz/NarakaTweaks/main/background.png');
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-color: rgba(0,0,0,0.85);
  background-blend-mode: overlay;
}
</style>
</head>
<body class="min-h-screen flex items-center justify-center text-white font-sans">
  <!-- New top navigation with socials + Ko‚ÄëFi + Source -->
  <nav class="fixed top-0 left-0 right-0 bg-black/70 backdrop-blur z-50">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <span class="font-bold text-yellow-400">RatzTweaks</span>
        <a href="https://notratz.github.io" target="_blank" rel="noopener" class="ml-2 bg-yellow-400 text-black font-semibold px-3 py-1 rounded hover:bg-yellow-500">Strive Home</a>
      </div>
      <div class="flex items-center gap-5 text-sm md:text-base">
        <a href="https://twitch.tv/notratz" target="_blank" rel="noopener" class="hover:underline">Twitch</a>
        <a href="https://www.youtube.com/@notratz" target="_blank" rel="noopener" class="hover:underline">YouTube</a>
        <a href="https://discord.gg/teamstrive" target="_blank" rel="noopener" class="hover:underline">Discord</a>
        <a href="https://ko-fi.com/notratz" target="_blank" rel="noopener" class="hover:underline">Ko-Fi</a>
        <a href="https://throne.com/NotRatz" target="_blank" rel="noopener" class="hover:underline">Throne</a>
        <a href="https://github.com/NotRatz/NarakaTweaks" target="_blank" rel="noopener" class="hover:underline">Source</a>
      </div>
    </div>
  </nav>

  <main class="bg-black bg-opacity-70 rounded-xl shadow-xl p-8 max-w-5xl w-full mt-20">
    <h1 class="text-3xl font-bold mb-2 text-yellow-400 text-center">RatzTweaks</h1>
    <p class="text-center text-gray-300 mb-6">Modern Windows optimization utility by Rat</p>

    <section class="mt-4">
      <h2 class="text-xl font-semibold text-white">Main Tweaks</h2>
      <p class="text-gray-300">Applies core system optimizations for stability and lower latency, including reduced telemetry and high-performance DWM adjustments.</p>
    </section>

    <section class="mt-4">
      <h2 class="text-xl font-semibold text-white">GPU Tweaks</h2>
      <p class="text-gray-300">Automatically detects AMD/NVIDIA GPU and applies configs for each. Imports Ratz's NVIDIA profile and latency registry tweaks.</p>
    </section>

    <section class="mt-4">
      <h2 class="text-xl font-semibold text-white">Optional Tweaks</h2>
      <ul class="list-disc list-inside text-gray-300">
        <li>Game Bar/DVR - optional toggle, off by default.</li>
        <li>Widgets - optional toggle, off by default.</li>
        <li>Copilot - optional toggle, off by default.</li>
        <li>MSI Mode & Power Plans - opt-in with easy revert.</li>
      </ul>
    </section>

    <section class="mt-4">
      <h2 class="text-xl font-semibold text-white">Quick Video Explanation</h2>
	  <p class="text-gray-300">The purpose of this tool is to mainly help with input lag and latency issues. There are other things such as Discord Overlay, NVIDIA App's Photo Mode & RTX HDR / Digital Vibrance that all cause performance loss. It's advised to disable them! The purpose of the discord login is for ease of contact incase something has gone wrong! All code is openly hosted on my GitHub just click Source above!</p>
      <div class="mt-3 flex flex-col md:flex-row gap-6 items-start">
        <video controls playsinline autoplay muted class="rounded-md shadow-lg w-full md:w-[640px] md:h-[360px]">
          <source src="RatzTweaks_Explained.mp4" type="video/mp4">
          Your browser does not support the video tag. <a href="RatzTweaks_Explained.mp4" target="_blank" class="underline text-yellow-400">Download/Play Video</a>
        </video>
        <!-- Discord widget moved to the right of the video -->
        <iframe src="https://discord.com/widget?id=1130709958225297510&theme=dark" width="350" height="500" allowtransparency="true" frameborder="0" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts" class="rounded-md shadow-lg"></iframe>
      </div>
    </section>
    
    <section class="mt-6">
      <h2 class="text-xl font-semibold text-white mb-3">How to Run</h2>
      <p class="text-gray-300 mb-4">
        <strong class="text-yellow-400">Important:</strong> Open <strong>PowerShell as Administrator</strong>, then copy and paste one of the commands below:
      </p>
      
      <!-- Command option 1 -->
      <div class="bg-gray-900 rounded-lg p-4 mb-3 border border-gray-700">
        <div class="flex items-center justify-between mb-2">
          <span class="text-sm text-gray-400">Option 1 (Recommended):</span>
          <button onclick="copyCommand('irm')" class="bg-blue-600 hover:bg-blue-700 text-white text-xs font-semibold px-3 py-1 rounded">
            Copy
          </button>
        </div>
        <code id="cmd-irm" class="block bg-black text-green-400 px-3 py-2 rounded text-sm overflow-x-auto">irm https://raw.githubusercontent.com/NotRatz/NarakaTweaks/main/RatzTweaks.ps1 | iex</code>
      </div>
      
      <!-- Command option 2 -->
      <div class="bg-gray-900 rounded-lg p-4 mb-3 border border-gray-700">
        <div class="flex items-center justify-between mb-2">
          <span class="text-sm text-gray-400">Option 2 (Alternative):</span>
          <button onclick="copyCommand('iwr')" class="bg-blue-600 hover:bg-blue-700 text-white text-xs font-semibold px-3 py-1 rounded">
            Copy
          </button>
        </div>
        <code id="cmd-iwr" class="block bg-black text-green-400 px-3 py-2 rounded text-sm overflow-x-auto">iwr -useb https://raw.githubusercontent.com/NotRatz/NarakaTweaks/main/RatzTweaks.ps1 | iex</code>
      </div>
      
      <div class="bg-yellow-900/30 border border-yellow-600 rounded-lg p-3 text-sm">
        <p class="text-yellow-200">
          üí° <strong>Tip:</strong> To open PowerShell as admin, press <kbd class="bg-gray-800 px-2 py-1 rounded">Win + X</kbd> then select "Windows PowerShell (Admin)" or "Terminal (Admin)"
        </p>
      </div>
    </section>
    
     <div class="my-8 flex items-center justify-center gap-3">
      <button class="bg-yellow-500 hover:bg-yellow-600 text-black font-bold py-2 px-4 rounded" onclick="downloadLauncher()">Start (Download Launcher)</button>
      <button class="bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded" onclick="revertTweaks()">Revert</button>
    </div>
    
    <!-- Legacy Commands Section -->
    <section class="mt-6 border-t border-gray-600 pt-6">
      <h2 class="text-xl font-semibold text-white mb-3">Legacy Commands</h2>
      <p class="text-gray-400 mb-4 text-sm">
        These are the original PowerShell commands for advanced users who prefer manual execution:
      </p>
      
      <!-- Legacy Command option 1 -->
      <div class="bg-gray-900 rounded-lg p-4 mb-3 border border-gray-700">
        <div class="flex items-center justify-between mb-2">
          <span class="text-sm text-gray-400">Legacy Option 1:</span>
          <button onclick="copyLegacyCommand('irm')" class="bg-gray-600 hover:bg-gray-500 text-white text-xs font-semibold px-3 py-1 rounded">
            Copy
          </button>
        </div>
        <code id="legacy-cmd-irm" class="block bg-black text-green-400 px-3 py-2 rounded text-sm overflow-x-auto">irm https://raw.githubusercontent.com/NotRatz/NarakaTweaks/main/RatzTweaks.ps1 | iex</code>
      </div>
      
      <!-- Legacy Command option 2 -->
      <div class="bg-gray-900 rounded-lg p-4 mb-3 border border-gray-700">
        <div class="flex items-center justify-between mb-2">
          <span class="text-sm text-gray-400">Legacy Option 2:</span>
          <button onclick="copyLegacyCommand('iwr')" class="bg-gray-600 hover:bg-gray-500 text-white text-xs font-semibold px-3 py-1 rounded">
            Copy
          </button>
        </div>
        <code id="legacy-cmd-iwr" class="block bg-black text-green-400 px-3 py-2 rounded text-sm overflow-x-auto">iwr -useb https://raw.githubusercontent.com/NotRatz/NarakaTweaks/main/RatzTweaks.ps1 | iex</code>
      </div>
      
      <div class="bg-blue-900/30 border border-blue-600 rounded-lg p-3 text-sm">
        <p class="text-blue-200">
          ‚ÑπÔ∏è <strong>Note:</strong> These legacy commands require opening PowerShell as Administrator manually.
        </p>
      </div>
    </section>
  </main>

  <script>
const revertCmd = "powershell -NoProfile -ExecutionPolicy Bypass -Command irm https://raw.githubusercontent.com/notratz/NarakaTweaks/main/RatzTweaks.ps1 | iex; Revert-OptionalTweaks";

const legacyCommands = {
  irm: "irm https://raw.githubusercontent.com/NotRatz/NarakaTweaks/main/RatzTweaks.ps1 | iex",
  iwr: "iwr -useb https://raw.githubusercontent.com/NotRatz/NarakaTweaks/main/RatzTweaks.ps1 | iex"
};

function copyCommand(type) {
  const cmd = legacyCommands[type];
  navigator.clipboard.writeText(cmd).then(function(){
    // Visual feedback
    const btn = event.target;
    const originalText = btn.textContent;
    btn.textContent = '‚úì Copied!';
    btn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
    btn.classList.add('bg-green-600');
    setTimeout(function(){
      btn.textContent = originalText;
      btn.classList.remove('bg-green-600');
      btn.classList.add('bg-blue-600', 'hover:bg-blue-700');
    }, 2000);
  }).catch(function(){
    // Fallback: show prompt if clipboard fails
    prompt('Copy this command:', cmd);
  });
}

function copyLegacyCommand(type) {
  const cmd = legacyCommands[type];
  navigator.clipboard.writeText(cmd).then(function(){
    // Visual feedback
    const btn = event.target;
    const originalText = btn.textContent;
    btn.textContent = '‚úì Copied!';
    btn.classList.remove('bg-gray-600', 'hover:bg-gray-500');
    btn.classList.add('bg-green-600');
    setTimeout(function(){
      btn.textContent = originalText;
      btn.classList.remove('bg-green-600');
      btn.classList.add('bg-gray-600', 'hover:bg-gray-500');
    }, 2000);
  }).catch(function(){
    // Fallback: show prompt if clipboard fails
    prompt('Copy this command:', cmd);
  });
}

function copyAndRun(cmd){
  navigator.clipboard.writeText(cmd).then(function(){
    alert('Command Copied! \n\n' + cmd + '\n\nPress Win+R, paste the command, and press Enter to begin!');
  }).catch(function(){
    // Fallback: show prompt if clipboard fails
    prompt('Copy and run this command:', cmd);
  });
}

async function downloadLauncher() {
  try {
    // Get the latest release from GitHub API
    const response = await fetch('https://api.github.com/repos/notratz/NotNaraka-Launcher/releases/latest');
    const release = await response.json();
    
    // Find the first asset (should be the executable)
    const asset = release.assets[0];
    
    if (asset) {
      // Create a temporary link element and trigger download
      const link = document.createElement('a');
      link.href = asset.browser_download_url;
      link.download = asset.name;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      
      // Show success message
      alert('Download started! The NotNaraka Launcher will be downloaded automatically.');
    } else {
      throw new Error('No downloadable assets found in the latest release');
    }
  } catch (error) {
    console.error('Download failed:', error);
    // Fallback to opening the releases page
    window.open('https://github.com/notratz/NotNaraka-Launcher/releases/latest', '_blank');
    alert('Auto-download failed. You will be redirected to the releases page to download manually.');
  }
}

function revertTweaks(){
  copyAndRun(revertCmd);
}
</script>
</body>
</html>
